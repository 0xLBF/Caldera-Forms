function size_format(e){var a=!1;return quant=[{unit:"TB",mag:1099511627776},{unit:"GB",mag:1073741824},{unit:"MB",mag:1048576},{unit:"kB",mag:1024},{unit:"B ",mag:1}],quant.forEach(function(l){parseFloat(e)>=l.mag&&0==a&&(a=e/l.mag,a=e>1048576?a.toFixed(2):Math.round(a),a=a+" "+l.unit)}),a}function handleFileSelect(e,a){if(e.stopPropagation(),e.preventDefault(),e.dataTransfer)var l=e.dataTransfer.files;else var l=e.target.files;for(var t=[],i=0;i<l.length;i++){var r="fl"+Math.round(0xaa7fca0bf1f1*Math.random());a.allowed.length&&a.allowed.indexOf(l[i].type)<0||(cf_uploader_filelist[e.target.id+"_file_"+r]={file:l[i],state:1})}for(var i in cf_uploader_filelist)t.push('<li class="cf-uploader-queue-item '+i+'">','<a href="#remove-file" data-file="'+i+'" class="cf-file-remove">&times;</a> <span class="file-name">',cf_uploader_filelist[i].file.name,"</span>",'<div class="progress-bar" style="background:#ececec;"><div class="bar" id="progress-file-'+i+'" style="height:2px;width:0%;background:#a3be5f;"></div></div>','<small class="file-type">',cf_uploader_filelist[i].file.type||"n/a","</small> ",'<small class="file-error"></small>','<small class="file-size">'+size_format(cf_uploader_filelist[i].file.size)+"</small>","</li>");e.target.value=null,document.getElementById(e.target.id+"_file_list").innerHTML="<ul>"+t.join("")+"</ul>"}function handleDragOver(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function handleDragOver(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}var cf_uploader_filelist={};jQuery(function(e){e(document).on("click",".cf-uploader-trigger",function(){var a=e(this);e("#"+a.data("parent")).trigger("click")}),e(".cf-multi-uploader").hide(),e(document).on("click",".cf-file-remove",function(a){a.preventDefault();var l=e(this),t=l.closest(".cf-multi-uploader-list").data("field");e('[data-parent="'+t+'"]').slideDown(),delete cf_uploader_filelist[l.data("file")],l.parent().remove()}),e(document).on("change",".cf-multi-uploader",function(a){var l=e(this);l.prop("multiple")||(cf_uploader_filelist={},l.parent().find(".cf-uploader-trigger").slideUp()),handleFileSelect(a,l.data("config"))})});