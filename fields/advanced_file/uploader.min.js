function size_format(e){var a=!1;return quant=[{unit:"TB",mag:1099511627776},{unit:"GB",mag:1073741824},{unit:"MB",mag:1048576},{unit:"kB",mag:1024},{unit:"B ",mag:1}],quant.forEach(function(l){parseFloat(e)>=l.mag&&0==a&&(a=e/l.mag,a=e>1048576?a.toFixed(2):Math.round(a),a=a+" "+l.unit)}),a}function handleFileSelect(e,a){if(e.stopPropagation(),e.preventDefault(),e.dataTransfer)var l=e.dataTransfer.files;else var l=e.target.files;for(var i=[],t=0;t<l.length;t++){var r="fl"+Math.round(0xaa7fca0bf1f1*Math.random()),f=1,s="";a.allowed.length&&a.allowed.indexOf(l[t].type)<0&&(f=0,s=a.notices.invalid_filetype),a.max_size&&l[t].size>a.max_size&&(f=0,s=a.notices.file_exceeds_size_limit),l[t].size||(f=0,s=a.notices.zero_byte_file),cf_uploader_filelist[e.target.id+"_file_"+r]={file:l[t],state:f,message:s}}for(var t in cf_uploader_filelist){var n="";0===cf_uploader_filelist[t].state&&(n="has-error"),i.push('<li class="cf-uploader-queue-item '+t+" "+n+'">','<a href="#remove-file" data-file="'+t+'" class="cf-file-remove">&times;</a> <span class="file-name">',cf_uploader_filelist[t].file.name,"</span>&nbsp;",'<div class="progress-bar" style="background:#ececec;"><div class="bar" id="progress-file-'+t+'" style="height:2px;width:0%;background:#a3be5f;"></div></div>','<small class="file-type">',cf_uploader_filelist[t].file.type||"n/a","</small> ",'<small class="file-size">'+size_format(cf_uploader_filelist[t].file.size)+"</small>",'<small class="file-error">'+cf_uploader_filelist[t].message+"</small>","</li>")}e.target.value=null,document.getElementById(e.target.id+"_file_list").innerHTML="<ul>"+i.join("")+"</ul>"}function handleDragOver(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function handleDragOver(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}var cf_uploader_filelist={};jQuery(function(e){e(document).on("click",".cf-uploader-trigger",function(){var a=e(this);e("#"+a.data("parent")).trigger("click")}),e(".cf-multi-uploader").hide(),e(document).on("click",".cf-file-remove",function(a){a.preventDefault();var l=e(this),i=l.closest(".cf-multi-uploader-list").data("field");e('[data-parent="'+i+'"]').slideDown(),delete cf_uploader_filelist[l.data("file")],l.parent().remove()}),e(document).on("change",".cf-multi-uploader",function(a){var l=e(this);l.prop("multiple")||(cf_uploader_filelist={},l.parent().find(".cf-uploader-trigger").slideUp()),handleFileSelect(a,l.data("config"))})});