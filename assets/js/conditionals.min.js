var calders_forms_check_conditions,calders_forms_init_conditions;!function(e){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var r=this.length>>>0,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=r);r>a;a++)if(a in this&&this[a]===e)return a;return-1}),cf_debounce=function(e,r,a){var t;return function(){var i=this,o=arguments,n=function(){t=null,a||e.apply(i,o)},d=a&&!t;clearTimeout(t),t=setTimeout(n,r),d&&e.apply(i,o)}},calders_forms_check_conditions=function(r){if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[r]){var a=e("#"+r);for(var t in caldera_conditionals[r]){var i=jQuery("#conditional_"+t);if(i.length){var o=caldera_conditionals[r][t].type,n=caldera_conditionals[r][t].group,d=[];for(var s in n){var l={},c=n[s];for(var f in c){var u=a.find('[data-field="'+c[f].field+'"]'),h=[],p="function"==typeof c[f].value?c[f].value():c[f].value;if("undefined"!=typeof c[f].selectors)for(var g in c[f].selectors){var m=new RegExp(g,"g");p=p.replace(m,e(c[f].selectors[g]).val())}if(l[f]=!1,u.is(":radio,:checkbox")?u=u.filter(":checked"):u.is("div")&&(u=jQuery("<input>").val(u.html())),u.length)for(var v=0;v<u.length;v++)h.push(u[v].value);else h.push(c[f].field);switch(c[f].compare){case"is":h.length&&h.indexOf(p.toString())>=0&&(l[f]=!0);break;case"isnot":h.length&&h.indexOf(p)<0&&(l[f]=!0);break;case">":case"greater":l[f]=parseFloat(h.reduce(function(e,r){return e+r}))>parseFloat(p);break;case"<":case"smaller":l[f]=parseFloat(h.reduce(function(e,r){return e+r}))<parseFloat(p);break;case"startswith":for(var v=0;v<h.length;v++)h[v].toLowerCase().substr(0,p.toLowerCase().length)===p.toLowerCase()&&(l[f]=!0);break;case"endswith":for(var v=0;v<h.length;v++)h[v].toLowerCase().substr(h[v].toLowerCase().length-p.toLowerCase().length)===p.toLowerCase()&&(l[f]=!0);break;case"contains":for(var v=0;v<h.length;v++)h[v].toLowerCase().indexOf(p)>=0&&(l[f]=!0)}}istrue=!0;for(var _ in l)if(l[_]===!1){istrue=!1;break}d.push(istrue)}var b,y=jQuery("#conditional-"+t+"-tmpl").html(),w=jQuery("#conditional_"+t),j=jQuery('[data-field="'+t+'"]');d.length&&d.indexOf(!0)>=0?"show"===o?b="show":"hide"===o?b="hide":"disable"===o&&(b="disable"):b="show"===o?"hide":"disable"===o?"enable":"show","show"===b?w.html().length||(w.html(y).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===b?w.html().length&&(j.val("").empty().prop("checked",!1),w.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===b?w.html().length?(j.prop("disabled",!1),jQuery("#"+t).prop("disabled",!1)):(w.html(y).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===b&&(w.html().length?(j.prop("disabled","disabled"),jQuery("#"+t).prop("disabled","disabled")):(w.html(y).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+t+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(r){var a=e(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(a)},10))},"undefined"!=typeof caldera_conditionals&&calders_forms_init_conditions()}(jQuery);