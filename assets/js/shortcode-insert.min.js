jQuery(function(e){if(e(".color-field").wpColorPicker({mode:"rgba"}),e("body").on("click","#caldera-forms-form-insert,#wp_fs_caldera-forms",function(t){t.preventDefault();var o=e(".caldera-forms-insert-modal");data=e(this).data("settings"),data&&(data.id&&e('.selected-form-shortcode[value="'+data.id+'"]').prop("checked",!0),data.modal&&(e(".set_cf_modal").prop("checked",!0),e(".modal-forms-setup").show()),data.type&&e(".modal_trigger_type").val(data.type),data.content&&e(".modal_trigger").val(data.content),e(this).data("settings",{})),o.fadeIn(100)}),e("body").on("click",".caldera-modal-closer",function(t){t.preventDefault();var o=e(".caldera-forms-insert-modal");e("#calderaf_forms_shortcode_modal")[0].reset(),e(".modal-forms-setup").hide(),o.fadeOut(100)}),e("body").on("change",".set_cf_modal",function(t){var o=e(this);o.is(":checked")?e(".modal-forms-setup").show():e(".modal-forms-setup").hide()}),e("body").on("click",".caldera-form-shortcode-insert",function(t){t.preventDefault();var o,a=e(".selected-form-shortcode:checked"),d=e(".set_cf_modal").prop("checked"),r=e(".modal_trigger").val(),c=e(".modal_trigger_type").val();a.length&&(o='[caldera_form id="'+a.val()+'" type="'+c+'"',d===!0&&(o+=' modal="true"'),o+="]",d&&(o+=r.length?r:a.parent().text(),o+="[/caldera_form]"),e("#calderaf_forms_shortcode_modal")[0].reset(),e(".modal-forms-setup").hide(),a.prop("checked",!1),window.send_to_editor(o),e(".caldera-modal-closer").trigger("click"))}),"undefined"!=typeof wp&&"undefined"!=typeof wp.media){var t=wp.media;"function"==typeof wp.mce.views.register&&wp.mce.views.register("caldera_form",{template:t.template("editor-caldera-forms"),initialize:function(){this.fetch()},setLoader:function(){this.setContent('<div class="loading-placeholder"><div class="dashicons dashicons-update" style="color:#a3be5f;"></div><div class="wpview-loading"><ins style="background-color:#a3be5f;"></ins></div></div>')},fetch:function(){var t=this,o={post_id:e("#post_ID").val(),content:t.shortcode.content,atts:t.shortcode.attrs};wp.ajax.post("cf_get_form_preview",o).done(function(e){t.render(e.html)}).fail(function(e){t.render(e.html)})},edit:function(e){var t=this.shortcode.attrs.named;t.content=this.shortcode.content,jQuery("#caldera-forms-form-insert").data("settings",t).trigger("click")}})}});