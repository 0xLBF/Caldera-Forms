var resBaldrickTriggers;jQuery(function(a){var e=[],r=function(r,t,s){var i=a("#progress-file-"+t),d=a("."+t+" .file-size");e.push(1),cf_uploader_filelist[t].state=2,a.ajax({xhr:function(){var a=new window.XMLHttpRequest;return a.upload.addEventListener("progress",function(a){if(a.lengthComputable){var e=a.loaded/a.total*100;i.width(e+"%"),d.html(size_format(a.loaded)+" / "+size_format(a.total))}},!1),a.addEventListener("progress",function(a){if(a.lengthComputable){a.loaded/a.total}},!1),a},url:r.data("request")+"/upload/",type:"POST",data:s,processData:!1,contentType:!1,success:function(s,i,d){if(s.success&&s.success===!0){e.pop();var l=a('[data-file="'+t+'"]');l.next().addClass("file-uploaded"),l.remove(),cf_uploader_filelist[t].state=3,r.submit()}else if(s.data&&!s.success)return a("."+t).addClass("has-error"),r.find(":submit").prop("disabled",!1),r.find(".cf-uploader-trigger").slideDown(),a("."+t+" .file-error").html(s.data),console.log(s.success),void console.log(s.data)},error:function(a,e,t){r.data("postDisable")||buttons.prop("disabled",!1)}})};(resBaldrickTriggers=function(){a(".cfajax-trigger").baldrick({request:"./",method:"POST",init:function(t,s){s.preventDefault();var i=a(t),d=i.find(":submit");if(i.data("_cf_manual"))return i.find('[name="cfajax"]').remove(),!1;if(i.data("postDisable")||d.prop("disabled",!0),"object"==typeof cf_uploader_filelist){i.find(".cf-uploader-trigger").slideUp();var l=!1,o=e.length;for(var n in cf_uploader_filelist)if(!(cf_uploader_filelist[n].state>1||0===cf_uploader_filelist[n].state)){l=!0;var c=new FormData,p=n,f=a("#"+p.split("_file_")[0]);if(c.append(f.data("field"),cf_uploader_filelist[n].file),c.append("field",f.data("field")),c.append("control",f.data("controlid")),r(i,p,c),o++,1===o)break}if(!0===l||e.length)return!1}},error:function(a){404===a.jqxhr.status&&this.trigger.data("_cf_manual",!0).trigger("submit")},callback:function(e){e.params.trigger.find(":submit").prop("disabled",!1);e.params.trigger.data("instance");if(e.params.trigger.data("customCallback")&&"function"==typeof window[e.params.trigger.data("customCallback")]&&window[e.params.trigger.data("customCallback")](e.data),e.params.trigger.data("inhibitnotice")||(a(".caldera_ajax_error_wrap").removeClass("caldera_ajax_error_wrap").removeClass("has-error"),a(".caldera_ajax_error_block").remove(),"complete"===e.data.status||"success"===e.data.type?(e.data.html&&e.params.target.html(e.data.html),e.params.trigger.data("hiderows")&&e.params.trigger.find("div.row").remove()):"preprocess"===e.data.status?e.params.target.html(e.data.html):"error"===e.data.status&&e.params.target.html(e.data.html)),"complete"!==e.data.status&&"success"!==e.data.type||e.data.entry||e.params.trigger[0].reset(),e.data.url&&(e.params.trigger.hide(),window.location=e.data.url),e.params.trigger.find(".cf-uploader-trigger").slideDown(),e.data.fields)for(var r in e.data.fields){var t=e.params.trigger.find('[data-field="'+r+'"]'),s=t.parent();s.is("label")&&(s=s.parent(),(s.hasClass("checkbox")||s.hasClass("radio"))&&(s=s.parent()));var i=s.find(".help-block").not(".caldera_ajax_error_block");s.addClass("has-error").addClass("caldera_ajax_error_wrap"),i.length&&i.hide(),s.append('<span class="help-block caldera_ajax_error_block">'+e.data.fields[r]+"</span>")}a(document).trigger("cf.submission",e),a(document).trigger("cf."+e.data.type)}})})()});