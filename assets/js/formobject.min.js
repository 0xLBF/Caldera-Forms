!function(e){if(e.fn.formJSON=function(){for(var t=e(this),r=t.find("[name]"),a={},s={},f=0;f<r.length;f++){var i=e(r[f]),o=i.prop("name").replace(/\]/gi,"").split("["),l=i.val(),n={};if(!i.is(":radio")&&!i.is(":checkbox")||i.is(":checked")){for(var c=o.length-1;c>=0;c--){var d=o[c];if("undefined"==typeof d&&(d=""),0===d.length&&(n=[],"undefined"==typeof s[o[c-1]]?s[o[c-1]]=0:s[o[c-1]]+=1,d=s[o[c-1]]),c===o.length-1){if(l)if("true"===l)l=!0;else if("false"===l)l=!1;else if(isNaN(parseFloat(l))||parseFloat(l).toString()!==l)if("string"!=typeof l||"{"!==l.substr(0,1)&&"["!==l.substr(0,1)){if("object"==typeof l&&l.length&&i.is("select")){for(var p={},c=0;c<l.length;c++)p["n"+c]=l[c];l=p}}else try{l=JSON.parse(l)}catch(g){}else l=parseFloat(l);n[d]=l}else{var h=n;n={},n[d]=h}}e.extend(!0,a,n)}}return a},e(".caldera_forms_form").on("click",".cf-form-trigger",function(t){var r=e(this);form=r.closest("form.caldera_forms_form"),form_id=form.prop("id"),calderaforms=window[form_id],data=form.formJSON(),fields={},target=r.data("target");for(var a in calderaforms)fields[calderaforms[a].slug]=data[a];if("function"==typeof window[target])window[target](fields,t);else{try{var s=e(target)}catch(f){}if(s&&s.length){fields=JSON.stringify(fields);var i=["textarea","text","hidden"];s.each(function(t,r){this.type&&i.indexOf(this.type)>=0?e(this).val(fields).trigger("change"):this.innerHTML=fields})}else e.post(target,fields)}}),cfModals){var t=e("head"),r=e("body");for(var a in cfModals.style)e("#cf-"+a+"-styles-css").length||t.append('<link id="cf-'+a+'-styles-css" rel="stylesheet" type="text/css" href="'+cfModals.style[a]+'">');for(var s in cfModals.script)e('script[src^="'+cfModals.script[s]+'"]').length||r.append('<script src="'+cfModals.script[s]+'" type="text/javascript">');e(document).on("click",".caldera-forms-modal",function(){var t=e(this);if(t.data("form")){t.calderaModal({content:function(){return e.get("/api/cf/"+t.data("form"))}})}})}}(jQuery);