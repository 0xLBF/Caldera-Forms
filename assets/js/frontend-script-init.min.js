var cf_jsfields_init;webshim.polyfill("forms"),function(a){cf_jsfields_init=function(){a(".init_field_type[data-type]").each(function(e,t){var d=a(t);"function"==typeof window[d.data("type")+"_init"]&&window[d.data("type")+"_init"](d.prop("id"),d[0])})},a("document").ready(function(){cf_jsfields_init()}),a(".caldera-form-page").length&&a(".caldera-form-page").on("keypress","[data-field]:not(textarea)",function(a){13===a.keyCode&&a.preventDefault()}),a(document).on("click",".cf_modal_button",function(e){e.preventDefault();var t=a(this);a(t.attr("href")).show()}),a(document).on("click",".caldera-front-modal-closer",function(e){e.preventDefault();var t=a(this);t.closest(".caldera-front-modal-container").hide()}),a(document).on("cf.add cf.enable cf.disable cf.pagenav",cf_jsfields_init),a(document).on("click","[data-page]",function(e){var t,d,r,i=a(this),n=i.closest(".caldera-form-page"),f=i.closest(".caldera-grid"),o=n.data("formpage"),l=a('.breadcrumb[data-form="'+f.prop("id")+'"]'),c={};if(f.length){i.data("pagenav")?(r=a("#"+i.data("pagenav")+" .caldera-form-page").find("[data-field]"),f=i.closest(".caldera_forms_form")):r=f.find(".caldera-form-page:visible").find("[data-field]");for(var p=0;p<r.length;p++)if(a(r[p]).is(":radio,:checkbox")){if(!a(r[p]).hasClass("option-required"))continue;c[a(r[p]).data("field")]||(c[a(r[p]).data("field")]=[]),c[a(r[p]).data("field")].push(a(r[p]).prop("checked"))}else if(a(r[p]).prop("required")){if(!r[p].value.length)return e.preventDefault(),void f.find('[type="submit"]').trigger("click");if("email"===r[p].type&&(r[p].value.indexOf("@")<0||r[p].value.length<=r[p].value.indexOf("@")+1))return e.preventDefault(),void f.find('[type="submit"]').trigger("click")}for(var s in c){if(c[s].indexOf(!0)<0)return a('[for="'+s+'"]').parent().addClass("has-error"),!1;a('[for="'+s+'"]').parent().removeClass("has-error")}"next"===i.data("page")?(l&&l.find("li.active").removeClass("active"),t=f.find('.caldera-form-page[data-formpage="'+(o+1)+'"]'),t.length&&(n.hide(),t.show(),l&&l.find('a[data-page="'+(o+1)+'"]').parent().addClass("active"))):"prev"===i.data("page")?(l&&l.find("li.active").removeClass("active"),d=f.find('.caldera-form-page[data-formpage="'+(o-1)+'"]'),d.length&&(n.hide(),d.show(),l&&l.find('a[data-page="'+(o-1)+'"]').parent().addClass("active"))):i.data("pagenav")&&(e.preventDefault(),i.closest(".breadcrumb").find("li.active").removeClass("active"),a("#"+i.data("pagenav")+" .caldera-form-page").hide(),a("#"+i.data("pagenav")+'	.caldera-form-page[data-formpage="'+i.data("page")+'"]').show(),i.parent().addClass("active")),a("html, body").animate({scrollTop:f.offset().top-100},200),a(document).trigger("cf.pagenav")}});var e;a(".caldera-grid .breadcrumb").each(function(t,d){a(d).find("a[data-pagenav]").each(function(t,d){var r=a(d),i=r.data("pagenav"),n=a("#"+i+' .caldera-form-page[data-formpage="'+r.data("page")+'"]');n.find(".has-error").length&&(r.parent().addClass("error"),"undefined"==typeof e&&(r.trigger("click"),e=!0))})})}(jQuery);