var cf_jsfields_init;!function(a){a("[data-sync]").each(function(){for(var e=a(this),t=e.data("binds"),r=e.closest("form"),d=0;d<t.length;d++)a(document).on("keyup change","[data-field='"+t[d]+"']",function(){var t=e.data("sync");if(id=a(this).data("field"),reg=new RegExp("{{([^}]*?)}}","g"),template=t.match(reg),!e.data("unsync")){for(var d=0;d<template.length;d++){var n=template[d].replace(/\}/g,"").replace(/\{/g,""),i=new RegExp(template[d],"g");t=t.replace(i,r.find("[data-field='"+n+"']").val())}e.val(t)}}),a("[data-field='"+t[d]+"']").trigger("change")}),a(document).on("change","[data-sync]",function(){a(this).data("unsync",!0)}),cf_jsfields_init=function(){a(".init_field_type[data-type]").each(function(e,t){var r=a(t);"function"==typeof window[r.data("type")+"_init"]&&window[r.data("type")+"_init"](r.prop("id"),r[0])}),"undefined"!=typeof cfValidatorLocal&&window.Parsley.setLocale(cfValidatorLocal),"undefined"!=typeof cfModals&&"undefined"!=typeof cfModals.config&&"undefined"!=typeof cfModals.config.validator_lang&&window.Parsley.setLocale(cfModals.config.validator_lang),window.Parsley.on("field:validated",function(){setTimeout(function(){a(document).trigger("cf.error")},15)}),"undefined"==typeof resBaldrickTriggers&&a(".caldera_forms_form").parsley({errorsWrapper:'<span class="help-block caldera_ajax_error_block"></span>',errorTemplate:"<span></span>"})},a("document").ready(function(){cf_jsfields_init()}),a(".caldera-form-page").length&&a(".caldera-form-page").on("keypress","[data-field]:not(textarea)",function(a){13===a.keyCode&&a.preventDefault()}),a(document).on("click",".cf_modal_button",function(e){e.preventDefault();var t=a(this);a(t.attr("href")).show()}),a(document).on("click",".caldera-front-modal-closer",function(e){e.preventDefault();var t=a(this);t.closest(".caldera-front-modal-container").hide()}),a(document).on("cf.add cf.enable cf.disable cf.pagenav",cf_jsfields_init),a(document).on("click","[data-page]",function(e){var t,r,d,n=a(this),i=n.closest(".caldera-form-page"),o=n.closest("form.caldera_forms_form"),f=i.data("formpage")?i.data("formpage"):n.data("page"),l=a('.breadcrumb[data-form="'+o.prop("id")+'"]'),c=!0,s={};if(o.length){if(d=o.find("[data-field]"),o.find(".has-error[data-page]").removeClass("has-error"),"prev"!==n.data("page"))for(var p=0;p<d.length;p++){var g=a(d[p]);if(g.is(":radio,:checkbox")){if(!g.hasClass("option-required")||!1===g.is(":visible"))continue;s[g.data("field")]||(s[g.data("field")]=[]),s[g.data("field")].push(g.prop("checked"))}else{if(g.prop("required")&&!1===g.is(":visible"))continue;if(g.prop("required")&&!0!==g.parsley().isValid()){if(g.is(":visible"))return g.parsley().validate(),void e.preventDefault();var m=parseFloat(g.closest(".caldera-form-page[data-formpage]").data("formpage"));m<parseFloat(f)&&o.find('[data-page="'+m+'"]').addClass("has-error"),c=!1}}}for(var u in s){if(s[u].indexOf(!0)<0)return a('[for="'+u+'"]').parent().addClass("has-error"),!1;a('[for="'+u+'"]').parent().removeClass("has-error")}"next"===n.data("page")?(l&&l.find("li.active").removeClass("active"),t=o.find('.caldera-form-page[data-formpage="'+(f+1)+'"]'),t.length&&(i.hide(),t.show(),l&&l.find('a[data-page="'+(f+1)+'"]').parent().addClass("active"))):"prev"===n.data("page")?(l&&l.find("li.active").removeClass("active"),r=o.find('.caldera-form-page[data-formpage="'+(f-1)+'"]'),r.length&&(i.hide(),r.show(),l&&l.find('a[data-page="'+(f-1)+'"]').parent().addClass("active"))):n.data("pagenav")&&(e.preventDefault(),n.closest(".breadcrumb").find("li.active").removeClass("active"),a("#"+n.data("pagenav")+" .caldera-form-page").hide(),a("#"+n.data("pagenav")+'	.caldera-form-page[data-formpage="'+n.data("page")+'"]').show(),n.parent().addClass("active")),a("html, body").animate({scrollTop:o.offset().top-100},200),a(document).trigger("cf.pagenav")}});var e;a(".caldera-grid .breadcrumb").each(function(t,r){a(r).find("a[data-pagenav]").each(function(t,r){var d=a(r),n=d.data("pagenav"),i=a("#"+n+' .caldera-form-page[data-formpage="'+d.data("page")+'"]');i.find(".has-error").length&&(d.parent().addClass("error"),"undefined"==typeof e&&(d.trigger("click"),e=!0))})})}(jQuery);