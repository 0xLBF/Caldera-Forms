function CFEntryViewer2View(a,b,c,d,e){function f(c){var f={};if(!d.has(h,c)){var g=a.fieldOrder.headers;d.each(a.fieldsList,function(b,e){g[d.size(g)]={id:b,label:a.fields[b].label},f[b]=a.entryCollection[c][b]});var i={entryId:c,headers:g,data:f,fields:a.fieldsList};h[c]=new e({el:"#"+b.templates.entry,data:i})}return h.entryID}var g,h={},i=c(document.getElementById(b.templates.entry));this.init=function(c,h){e.component("caldera-forms-entries",{template:"#"+b.templates.entries,props:{data:Array,columns:Array,filterKey:String,single:String},data:function(){var a={};return this.columns.forEach(function(b){a[b]=1}),{sortKey:"",sortOrders:a}},computed:{filteredData:function(){var a=this.sortKey,b=this.filterKey&&this.filterKey.toLowerCase(),c=this.sortOrders[a]||1,d=this.data;return b&&(d=d.filter(function(a){return Object.keys(a).some(function(c){return String(a[c]).toLowerCase().indexOf(b)>-1})})),a&&(d=d.slice().sort(function(b,d){return b=b[a],d=d[a],(b===d?0:b>d?1:-1)*c})),d}},filters:{capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)}},methods:{sortBy:function(a){this.sortKey=a,this.sortOrders[a]=this.sortOrders[a]*-1},showDetails:function(a){return i.attr("aria-hidden")&&i.attr("aria-hidden",!1).show().css("visibility","visible"),f(a)}}}),g=new e({el:"#"+b.targets.entries,data:{searchQuery:"",gridColumns:a.fieldOrder.headers,gridData:d.toArray(a.entryCollection),single:!1,perPage:20,page:a.page}})}}function CFEntryViewer2(a,b,c,d){function e(a,e){k.fieldsList=d.toArray(d.allKeys(a.fields)),k.fields=a.fields,d.isEmpty(a.field_details.entry_list)?k.fieldOrder.headers=b.defaultColumns:(k.fieldOrder.headers=b.defaultColumns,d.each(a.field_details.entry_list,function(b,c){k.fieldOrder.headers[d.size(k.fieldOrder.headers)]={id:b,label:a.fields[b].label}})),d.isEmpty(a.field_details.order)?k.fieldOrder.all=k.fieldOrder.headers:k.fieldOrder.all=a.field_details.entry_list,d.isEmpty(e)||d.each(e,function(a,b){k.entryCollection[b]={id:a.id,time:a.datestamp},d.each(a.fields,function(a,d){c.inArray(a.id,k.fieldsList)&&(k.entryCollection[b][a.field_id]=a.value)})}),h=i.setupView("grid-template","demo",Vue)}function f(){return c.get(b.api.form+a).success(function(a){return a}).error(function(a){})}function g(d){return c.get(b.api.entries+a+"?page="+d).success(function(a){return a}).error(function(a){console.log(a)})}var h,i=this,j=1,k={fieldOrder:{headers:[],all:[]},fieldsList:{},entryCollection:{},page:1,formId:a,fields:{}};this.init=function(){c.when(f(),g(j)).then(function(a,b){e(a[0],b[0])})},this.setupView=function(a,e,f){h=new CFEntryViewer2View(k,b,c,d,f),h.init(a,e,f)}}!function(a){if("undefined"!=typeof CF_ENTRY_VIEWER_2_CONFIG){var b=CF_ENTRY_VIEWER_2_CONFIG.formId,c={};c[b]=new CFEntryViewer2(b,CF_ENTRY_VIEWER_2_CONFIG,a,_),c[b].init()}}(jQuery);