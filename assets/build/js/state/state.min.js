function CFState(a,b){function c(a){return l.hasOwnProperty(a)}function d(a){var c=b("#"+a);return c.length?(c.on("change keyup",function(){var a=b(this);m[a.attr("id")]=e(a),i.mutateState([a.attr("id")],a.val())}),m[a]=e(b(document.getElementById(a))),i.mutateState([c.attr("id")],c.val()),!0):(c=b("."+a),c.length?(c.on("change",function(){var a,c,d=[],g=b(this),h=g.attr("type");switch(h){case"radio":a=g.data("radio-field"),c=b("[data-radio-field="+a+"]"),d="";break;case"checkbox":a=g.data("checkbox-field"),c=b("[data-checkbox-field="+a+"]");break;default:a=g.data("field"),c=b("[data-field="+a+"]")}if(c.length)if(1==c.length)d=e(b(c[0]));else if("checkbox"===h){var j,k=0;c.each(function(a,c){j=b(c),j.prop("checked")&&(k+=f(e(j))),d.push(j.val())}),m[a]=k}else c.each(function(c,f){var g=b(f);g.prop("checked")&&("radio"===h?(m[a]=e(g),d=g.val()):d.push(g.val()))});else d=0;i.mutateState(a,d)}),!0):(i.unbind(a),!1))}function e(a){if(a.is("select")&&a.has("option")&&(a=a.find(":selected")),!a.length)return 0;if(a.is("hidden"))return a.val();var b=0,c=a.attr("data-calc-value");return b=void 0===c||!1===c||isNaN(c)?a.val():a.data("calc-value"),f(b)}function f(a){return!a||isNaN(a)?0:window.parseFloat(a)}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}var i=this,j=new CFEvents(this),k={},l={},m={};this.init=function(a,b){for(var c in a)d(c)?(l[c]=a[c],b.hasOwnProperty(c)?m[c]=b[c]:m[c]=null):(l[c]="",k[c]=!0,m[c]=null)},this.getState=function(a){return!!c(a)&&l[a]},this.getCalcValue=function(a,d){var j=0;if(!c(a))return j;if(d){d=0;var k,l=d;return b("#"+a).each(function(){l=0,k=b(this),k.prop("checked")&&(l=e(k),f(l)>f(d)&&(d=f(l)))}),f(d)}if(m.hasOwnProperty(a)){if(!1===m[a]||null===m[a]){var n=e(b(document.getElementById(a)));h(n)&&(n=f(n)),g(n)&&(m[a]=n)}j=m[a]}else j=i.getState(a),b.isArray(j)&&(j=j.reduce(function(a,b){return f(a)+f(b)},0)),g(j)&&(m[a]=j);return f(j)},this.mutateState=function(a,b){return!!c(a)&&(l[a]!=b&&(l[a]=b,j.trigger(a,b)),!0)},this.unbind=function(a){i.mutateState(a,""),k[a]=!0,delete m[a]},this.rebind=function(a){d(a),delete k[a]},this.events=function(){return{subscribe:function(a,b){c(a)&&j.subscribe(a,b)},detach:function(a,b){j.detach(a,b)}}}}