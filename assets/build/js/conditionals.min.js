var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){var b={};Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),cf_debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},calders_forms_check_conditions=function(c){function d(a){if(b[a])return b[a]}function e(a){return"object"==typeof window.cfstate&&window.cfstate.hasOwnProperty(a)?window.cfstate[a]:null}function f(a){return e(a.closest("form").attr("id"))}if("undefined"!=typeof caldera_conditionals&&void 0!==caldera_conditionals[c]){var g=a(document.getElementById(c));for(var h in caldera_conditionals[c]){if(jQuery("#conditional_"+h).length){var i=caldera_conditionals[c][h].type,j=caldera_conditionals[c][h].group,k=[];for(var l in j){var m={},n=j[l];for(var o in n){var p=g.find('[data-field="'+n[o].field+'"]'),q=[],r="function"==typeof n[o].value?n[o].value():n[o].value;if(void 0!==n[o].selectors)for(var s in n[o].selectors){var t=new RegExp(s,"g");r=r.replace(t,a(n[o].selectors[s]).val())}if(m[o]=!1,p.is(":radio,:checkbox"))p=p.filter(":checked");else if(p.is("div"))p=jQuery("<input>").val(p.html());else if(!p.length){var u=g.find('[data-calc-field="'+n[o].field+'"]');u.length&&(p=g.find('[data-calc-field="'+n[o].field+'"]'))}if(p.length)for(var v=0;v<p.length;v++)q.push(p[v].value);else q.push(n[o].field);switch(n[o].compare){case"is":q.length&&q.indexOf(r.toString())>=0&&(m[o]=!0);break;case"isnot":q.length&&q.indexOf(r)<0&&(m[o]=!0);break;case">":case"greater":m[o]=parseFloat(q.reduce(function(a,b){return a+b}))>parseFloat(r);break;case"<":case"smaller":m[o]=parseFloat(q.reduce(function(a,b){return a+b}))<parseFloat(r);break;case"startswith":for(var v=0;v<q.length;v++)q[v].toLowerCase().substr(0,r.toLowerCase().length)===r.toLowerCase()&&(m[o]=!0);break;case"endswith":for(var v=0;v<q.length;v++)q[v].toLowerCase().substr(q[v].toLowerCase().length-r.toLowerCase().length)===r.toLowerCase()&&(m[o]=!0);break;case"contains":for(var v=0;v<q.length;v++)q[v].toLowerCase().indexOf(r)>=0&&(m[o]=!0)}}istrue=!0;for(var w in m)if(!1===m[w]){istrue=!1;break}k.push(istrue)}var x,y=jQuery("#conditional-"+h+"-tmpl").html(),z=jQuery("#conditional_"+h),A=jQuery('[data-field="'+h+'"]');if(k.length&&k.indexOf(!0)>=0?"show"===i?x="show":"hide"===i?x="hide":"disable"===i&&(x="disable"):x="show"===i?"hide":"disable"===i?"enable":"show","show"===x)z.html().length||(z.html(y).trigger("cf.add"),jQuery(document).trigger("cf.add"),function(b){var c,e=d(b);if(void 0!=e)if("object"==typeof e)for(var g in e)!0===e[g]&&(c=a(document.getElementById(g)),c.prop("checked",!0));else c=a("#"+b),c.val(e);c||(c=c=a(document.getElementById(g)));var h=f(c);if(null!==h){if("object"==typeof e){var i=[];jQuery.each(e,function(b,c){c&&i.push(a("#"+b).val())}),e=i}h.mutateState(b,e)}}(h));else if("hide"===x)z.html().length&&(!function(c){var d,e=a(document.getElementById(c));if(e.length){d=f(e);var g=e.val();g&&(b[c]=g)}else{var h;e=a("."+c),d=f(e),b[c]={},e.each(function(d,e){h=a(e),h.prop("checked")?b[c][h.attr("id")]=!0:b[c][h.attr("id")]=!1})}null!==d&&d.mutateState(c,"")}(h),A.val("").empty().prop("checked",!1),z.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove"));else if("enable"===x||"disable"===x){var B=jQuery("#"+h);"enable"==x?z.html().length?B.prop("disabled",!1):(z.html(y).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable"),B.prop("disabled",!1)):z.html().length?B.prop("disabled","disabled"):(z.html(y).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),B.prop("disabled","disabled"))}}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(b){var c=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(c)},10))},"undefined"!=typeof caldera_conditionals&&(calders_forms_init_conditions(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);