var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){var b={};Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),cf_debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},calders_forms_check_conditions=function(c){function d(b){var c=f(b);if(void 0!=c)if("object"==typeof c)for(var d in c)!0===c[d]&&a(document.getElementById(d)).prop("checked",!0);else a("#"+b).val(c)}function e(c){var d=a(document.getElementById(c));if(d.length){var e=d.val();e&&(b[c]=e)}else{var f;d=a("."+c),b[c]={},d.each(function(d,e){f=a(e),f.prop("checked")?b[c][f.attr("id")]=!0:b[c][f.attr("id")]=!1})}}function f(a){if(b[a])return b[a]}if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[c]){var g=a(document.getElementById(c));for(var h in caldera_conditionals[c]){var i=jQuery("#conditional_"+h);if(i.length){var j=caldera_conditionals[c][h].type,k=caldera_conditionals[c][h].group,l=[];for(var m in k){var n={},o=k[m];for(var p in o){var q=g.find('[data-field="'+o[p].field+'"]'),r=[],s="function"==typeof o[p].value?o[p].value():o[p].value;if("undefined"!=typeof o[p].selectors)for(var t in o[p].selectors){var u=new RegExp(t,"g");s=s.replace(u,a(o[p].selectors[t]).val())}if(n[p]=!1,q.is(":radio,:checkbox")?q=q.filter(":checked"):q.is("div")&&(q=jQuery("<input>").val(q.html())),q.length)for(var v=0;v<q.length;v++)r.push(q[v].value);else r.push(o[p].field);switch(o[p].compare){case"is":r.length&&r.indexOf(s.toString())>=0&&(n[p]=!0);break;case"isnot":r.length&&r.indexOf(s)<0&&(n[p]=!0);break;case">":case"greater":n[p]=parseFloat(r.reduce(function(a,b){return a+b}))>parseFloat(s);break;case"<":case"smaller":n[p]=parseFloat(r.reduce(function(a,b){return a+b}))<parseFloat(s);break;case"startswith":for(var v=0;v<r.length;v++)r[v].toLowerCase().substr(0,s.toLowerCase().length)===s.toLowerCase()&&(n[p]=!0);break;case"endswith":for(var v=0;v<r.length;v++)r[v].toLowerCase().substr(r[v].toLowerCase().length-s.toLowerCase().length)===s.toLowerCase()&&(n[p]=!0);break;case"contains":for(var v=0;v<r.length;v++)r[v].toLowerCase().indexOf(s)>=0&&(n[p]=!0)}}istrue=!0;for(var w in n)if(n[w]===!1){istrue=!1;break}l.push(istrue)}var x,y=jQuery("#conditional-"+h+"-tmpl").html(),z=jQuery("#conditional_"+h),A=jQuery('[data-field="'+h+'"]');l.length&&l.indexOf(!0)>=0?"show"===j?x="show":"hide"===j?x="hide":"disable"===j&&(x="disable"):x="show"===j?"hide":"disable"===j?"enable":"show","show"===x?z.html().length||(z.html(y).trigger("cf.add"),jQuery(document).trigger("cf.add"),d(h)):"hide"===x?z.html().length&&(e(h),A.val("").empty().prop("checked",!1),z.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===x?z.html().length?(A.prop("disabled",!1),$field.prop("disabled",!1)):(z.html(y).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===x&&(z.html().length?(A.prop("disabled","disabled"),$field.prop("disabled","disabled")):(z.html(y).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+h+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(b){var c=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(c)},10))},"undefined"!=typeof caldera_conditionals&&(calders_forms_init_conditions(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);